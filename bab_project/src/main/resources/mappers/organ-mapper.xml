<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Organ">

	<!-- 조직도에 넣을 이름, 부서명, 직위명 조회 -->
	<select id="selectOrganList" resultType="Organ">
		SELECT * FROM EMPLOYEE
		JOIN DEPT USING (DEPT_CODE)
		JOIN JOB USING (JOB_CODE)
		ORDER BY JOB_CODE
	</select>
	
	<!-- 조직도에 넣을 부서 코드, 부서명 조회 -->
	<select id="selectDeptList" resultType="Organ">
		SELECT DEPT_CODE, DEPT_NAME FROM DEPT
	</select>
	
	<!-- 조직도에 넣을 직위명 조회 -->
	<select id="selectJobList" resultType="Organ">
		SELECT JOB_TITLE FROM JOB
	</select>
	
	<!-- 조직도에서 상세 직원 정보 조회 -->
	<select id="selectDetailInfo" resultType="Organ" parameterType="string">
		SELECT EMP_NAME, EMP_PHONE, EMP_EMAIL, EMP_DESKPHONE
		    , (SELECT DEPT_NAME FROM DEPT JOIN EMPLOYEE USING (DEPT_CODE) WHERE EMP_NO = #{emp_no}) DEPT_NAME
		    , (SELECT JOB_TITLE FROM JOB JOIN EMPLOYEE USING (JOB_CODE) WHERE EMP_NO = #{emp_no}) JOB_TITLE
		FROM EMPLOYEE 
		WHERE EMP_NO = #{emp_no}
	</select>


</mapper>
