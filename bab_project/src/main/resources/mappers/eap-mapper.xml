<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Eap">
	<insert id="insertHoDoc">
		INSERT INTO DOCUMENT_FORM VALUES(
	        (SELECT EXTRACT(YEAR FROM SYSDATE) || '-' || 
	        (SELECT DISTINCT(DF_CODE) FROM DOCUMENT_FORM WHERE DF_TITLE = '휴가신청서') || '-' || 
	        (SELECT LPAD(NVL(MAX(SUBSTR(DF_NO, 8)),0) + 1, 3, '0') FROM DOCUMENT_FORM) DF_NO
        FROM DUAL), '휴가신청서', 'A')
	</insert>
	
	<insert id="insertSpDoc">
		INSERT INTO DOCUMENT_FORM VALUES(
	        (SELECT EXTRACT(YEAR FROM SYSDATE) || '-' || 
	        (SELECT DISTINCT(DF_CODE) FROM DOCUMENT_FORM WHERE DF_TITLE = '지출결의서') || '-' || 
	        (SELECT LPAD(NVL(MAX(SUBSTR(DF_NO, 8)),0) + 1, 3, '0') FROM DOCUMENT_FORM) DF_NO
    	FROM DUAL), '지출결의서', 'B')
	</insert>
	
	<select id="selectDoc" resultType="Eap" parameterType="string">
		SELECT MAX(DF_NO) DF_NO FROM DOCUMENT_FORM WHERE DF_CODE = #{df_code}
	</select>
</mapper>
